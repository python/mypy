[case testWeakrefRef]
import weakref
from typing import Any, Callable
def f(x: object) -> object:
    ref = weakref.ref(x)
    return ref()

[out]
def f(x):
    x :: object
    r0, ref :: weakref.ReferenceType
    r1 :: object
L0:
    r0 = PyWeakref_NewRef(x, 0)
    ref = r0
    r1 = CPyWeakref_GetRef(ref)
    return r1

[case testWeakrefRefCallback]
import weakref
from typing import Any, Callable
def f(x: object, cb: Callable[[object], Any]) -> object:
    ref = weakref.ref(x, cb)
    return ref()

[out]
def f(x, cb):
    x, cb :: object
    r0, ref :: weakref.ReferenceType
    r1 :: object
L0:
    r0 = PyWeakref_NewRef(x, cb)
    ref = r0
    r1 = CPyWeakref_GetRef(ref)
    return r1

[case testFromWeakrefRef]
from typing import Any, Callable
from weakref import ref
def f(x: object) -> object:
    r = ref(x)
    return r()

[out]
def f(x):
    x :: object
    r0, r :: weakref.ReferenceType
    r1 :: object
L0:
    r0 = PyWeakref_NewRef(x, 0)
    r = r0
    r1 = CPyWeakref_GetRef(r)
    return r1

[case testFromWeakrefRefCallback]
from typing import Any, Callable
from weakref import ref
def f(x: object, cb: Callable[[object], Any]) -> object:
    r = ref(x, cb)
    return r()

[out]
def f(x, cb):
    x, cb :: object
    r0, r :: weakref.ReferenceType
    r1 :: object
L0:
    r0 = PyWeakref_NewRef(x, cb)
    r = r0
    r1 = CPyWeakref_GetRef(r)
    return r1

[case testWeakrefProxy]
import weakref
from typing import Any, Callable
def f(x: object) -> object:
    return weakref.proxy(x)

[out]
def f(x):
    x, r0 :: object
L0:
    r0 = PyWeakref_NewProxy(x, 0)
    return r0

[case testWeakrefProxyCallback]
import weakref
from typing import Any, Callable
def f(x: object, cb: Callable[[object], Any]) -> object:
    return weakref.proxy(x, cb)

[out]
def f(x, cb):
    x, cb, r0 :: object
L0:
    r0 = PyWeakref_NewProxy(x, cb)
    return r0

[case testFromWeakrefProxy]
from typing import Any, Callable
from weakref import proxy
def f(x: object) -> object:
    return proxy(x)

[out]
def f(x):
    x, r0 :: object
L0:
    r0 = PyWeakref_NewProxy(x, 0)
    return r0

[case testFromWeakrefProxyCallback]
from typing import Any, Callable
from weakref import proxy
def f(x: object, cb: Callable[[object], Any]) -> object:
    return proxy(x, cb)

[out]
def f(x, cb):
    x, cb, r0 :: object
L0:
    r0 = PyWeakref_NewProxy(x, cb)
    return r0
