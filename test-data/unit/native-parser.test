[case testHello]
print("hello")
[out]
MypyFile:1(
  ExpressionStmt:1(
    CallExpr:1(
      NameExpr(print)
      Args(
        StrExpr(hello)))))

[case testMemberExpr]
foo_bar.xyz2
[out]
MypyFile:1(
  ExpressionStmt:1(
    MemberExpr:1(
      NameExpr(foo_bar)
      xyz2)))

[case testTupleExpr]
("a", "b")
[out]
MypyFile:1(
  ExpressionStmt:1(
    TupleExpr:1(
      StrExpr(a)
      StrExpr(b))))

[case testOpExpr]
("x" + "y") * "z"
[out]
MypyFile:1(
  ExpressionStmt:1(
    OpExpr:1(
      *
      OpExpr:1(
        +
        StrExpr(x)
        StrExpr(y))
      StrExpr(z))))

[case testIntExpr]
(0, 1, 2, 203, 5345, 50123, 1234567890)
[out]
MypyFile:1(
  ExpressionStmt:1(
    TupleExpr:1(
      IntExpr(0)
      IntExpr(1)
      IntExpr(2)
      IntExpr(203)
      IntExpr(5345)
      IntExpr(50123)
      IntExpr(1234567890))))

[case testAssignmentStmt]
x = 1
a, b = c = 6
[out]
MypyFile:1(
  AssignmentStmt:1(
    NameExpr(x)
    IntExpr(1))
  AssignmentStmt:2(
    Lvalues(
      TupleExpr:2(
        NameExpr(a)
        NameExpr(b))
      NameExpr(c))
    IntExpr(6)))

[case testIfStmt]
if x:
    y
if a:
    b
else:
    c
[out]
MypyFile:1(
  IfStmt:1(
    If(
      NameExpr(x))
    Then(
      ExpressionStmt:2(
        NameExpr(y))))
  IfStmt:3(
    If(
      NameExpr(a))
    Then(
      ExpressionStmt:4(
        NameExpr(b)))
    Else(
      ExpressionStmt:6(
        NameExpr(c)))))

[case testIfStmtElif]
if a:
    b
elif c:
    d
else:
    e
[out]
MypyFile:1(
  IfStmt:1(
    If(
      NameExpr(a))
    Then(
      ExpressionStmt:2(
        NameExpr(b)))
    If(
      NameExpr(c))
    Then(
      ExpressionStmt:4(
        NameExpr(d)))
    Else(
      ExpressionStmt:6(
        NameExpr(e)))))

[case testWhileStmt]
while a:
    b
while c:
    d
else:
    e
[out]
MypyFile:1(
  WhileStmt:1(
    NameExpr(a)
    Block:2(
      ExpressionStmt:2(
        NameExpr(b))))
  WhileStmt:3(
    NameExpr(c)
    Block:4(
      ExpressionStmt:4(
        NameExpr(d)))
    Else(
      ExpressionStmt:6(
        NameExpr(e)))))

[case testIndexExpr]
a[b]
[out]
MypyFile:1(
  ExpressionStmt:1(
    IndexExpr:1(
      NameExpr(a)
      NameExpr(b))))

[case testListAndSetExpr]
a = []
b = [1, 2]
c = {3}
[out]
MypyFile:1(
  AssignmentStmt:1(
    NameExpr(a)
    ListExpr:1())
  AssignmentStmt:2(
    NameExpr(b)
    ListExpr:2(
      IntExpr(1)
      IntExpr(2)))
  AssignmentStmt:3(
    NameExpr(c)
    SetExpr:3(
      IntExpr(3))))

[case testBoolOpAnd]
a and b
a and b and c
[out]
MypyFile:1(
  ExpressionStmt:1(
    OpExpr:1(
      and
      NameExpr(a)
      NameExpr(b)))
  ExpressionStmt:2(
    OpExpr:2(
      and
      OpExpr:2(
        and
        NameExpr(a)
        NameExpr(b))
      NameExpr(c))))

[case testBoolOpOr]
x or y
1 or 2 or 3
[out]
MypyFile:1(
  ExpressionStmt:1(
    OpExpr:1(
      or
      NameExpr(x)
      NameExpr(y)))
  ExpressionStmt:2(
    OpExpr:2(
      or
      OpExpr:2(
        or
        IntExpr(1)
        IntExpr(2))
      IntExpr(3))))

[case testComparisonSimple]
a < b
x == y
[out]
MypyFile:1(
  ExpressionStmt:1(
    ComparisonExpr:1(
      <
      NameExpr(a)
      NameExpr(b)))
  ExpressionStmt:2(
    ComparisonExpr:2(
      ==
      NameExpr(x)
      NameExpr(y))))

[case testComparisonChained]
a < b < c
x == y != z
[out]
MypyFile:1(
  ExpressionStmt:1(
    ComparisonExpr:1(
      <
      <
      NameExpr(a)
      NameExpr(b)
      NameExpr(c)))
  ExpressionStmt:2(
    ComparisonExpr:2(
      ==
      !=
      NameExpr(x)
      NameExpr(y)
      NameExpr(z))))

[case testComparisonIsNotIn]
a is b
x is not y
z in w
q not in r
[out]
MypyFile:1(
  ExpressionStmt:1(
    ComparisonExpr:1(
      is
      NameExpr(a)
      NameExpr(b)))
  ExpressionStmt:2(
    ComparisonExpr:2(
      is not
      NameExpr(x)
      NameExpr(y)))
  ExpressionStmt:3(
    ComparisonExpr:3(
      in
      NameExpr(z)
      NameExpr(w)))
  ExpressionStmt:4(
    ComparisonExpr:4(
      not in
      NameExpr(q)
      NameExpr(r))))

[case testLiterals]
(None, True, False)
[out]
MypyFile:1(
  ExpressionStmt:1(
    TupleExpr:1(
      NameExpr(None)
      NameExpr(True)
      NameExpr(False))))

[case testSimpleFunction]
def foo():
    x = 1
[out]
MypyFile:1(
  FuncDef:1(
    foo
    Block:2(
      AssignmentStmt:2(
        NameExpr(x)
        IntExpr(1)))))

[case testFunctionWithArgs]
def add(x, y):
    return x + y
[out]
MypyFile:1(
  FuncDef:1(
    add
    Args(
      Var:nil(x)
      Var:nil(y))
    Block:2(
      ReturnStmt:2(
        OpExpr:2(
          +
          NameExpr(x)
          NameExpr(y))))))

[case testFunctionWithVarArgs]
def foo(*args):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    foo
    VarArg(
      Var:nil(args))
    Block:2(
      PassStmt:2())))

[case testFunctionWithKwargs]
def bar(**kwargs):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    bar
    DictVarArg(
      Var:nil(kwargs))
    Block:2(
      PassStmt:2())))

[case testFunctionWithKwOnly]
def baz(x, *, y):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    baz
    MaxPos(1)
    Args(
      Var:nil(x)
      Var:nil(y))
    Block:2(
      PassStmt:2())))

[case testFunctionWithAllArgKinds]
def complex_fn(a, b, *args, c, **kwargs):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    complex_fn
    MaxPos(2)
    Args(
      Var:nil(a)
      Var:nil(b)
      Var:nil(c))
    VarArg(
      Var:nil(args))
    DictVarArg(
      Var:nil(kwargs))
    Block:2(
      PassStmt:2())))

[case testAsyncFunction]
async def async_foo():
    pass
[out]
MypyFile:1(
  FuncDef:1(
    async_foo
    Async
    Block:2(
      PassStmt:2())))

[case testFunctionWithDefaultArg]
def greet(name="World"):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    greet
    Args(
      default(
        Var:nil(name)
        StrExpr(World)))
    Block:2(
      PassStmt:2())))

[case testFunctionWithMultipleDefaults]
def add(x=1, y=2):
    return x
[out]
MypyFile:1(
  FuncDef:1(
    add
    Args(
      default(
        Var:nil(x)
        IntExpr(1))
      default(
        Var:nil(y)
        IntExpr(2)))
    Block:2(
      ReturnStmt:2(
        NameExpr(x)))))

[case testFunctionMixedDefaultsAndRegular]
def func(a, b=5, c=10):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    func
    Args(
      Var:nil(a)
      default(
        Var:nil(b)
        IntExpr(5))
      default(
        Var:nil(c)
        IntExpr(10)))
    Block:2(
      PassStmt:2())))

[case testFunctionWithKwOnlyDefault]
def func(*, x=42):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    func
    MaxPos(0)
    Args(
      default(
        Var:nil(x)
        IntExpr(42)))
    Block:2(
      PassStmt:2())))

[case testCallWithKeywordArgs]
foo(x=1, y=2)
[out]
MypyFile:1(
  ExpressionStmt:1(
    CallExpr:1(
      NameExpr(foo)
      Args()
      KwArgs(
        x
        IntExpr(1))
      KwArgs(
        y
        IntExpr(2)))))

[case testCallMixedPositionalAndKeyword]
bar(1, 2, x=3, y=4)
[out]
MypyFile:1(
  ExpressionStmt:1(
    CallExpr:1(
      NameExpr(bar)
      Args(
        IntExpr(1)
        IntExpr(2))
      KwArgs(
        x
        IntExpr(3))
      KwArgs(
        y
        IntExpr(4)))))

[case testCallWithStarArgs]
f(1, *x, 2)
[out]
MypyFile:1(
  ExpressionStmt:1(
    CallExpr:1(
      NameExpr(f)
      Args(
        IntExpr(1)
        NameExpr(x)
        IntExpr(2))
      VarArg)))

[case testCallWithDictStarArgs]
f(**x)
f(1, **y)
[out]
MypyFile:1(
  ExpressionStmt:1(
    CallExpr:1(
      NameExpr(f)
      Args()
      DictVarArg(
        NameExpr(x))))
  ExpressionStmt:2(
    CallExpr:2(
      NameExpr(f)
      Args(
        IntExpr(1))
      DictVarArg(
        NameExpr(y)))))

[case testCallWithAllArgTypes]
f(1, *x, a=2, **y)
[out]
MypyFile:1(
  ExpressionStmt:1(
    CallExpr:1(
      NameExpr(f)
      Args(
        IntExpr(1)
        NameExpr(x))
      VarArg
      KwArgs(
        a
        IntExpr(2))
      DictVarArg(
        NameExpr(y)))))

[case testSimpleClass]
class A:
    pass
[out]
MypyFile:1(
  ClassDef:1(
    A
    PassStmt:2()))

[case testClassWithMethod]
class Foo:
    def bar(self):
        return 1
[out]
MypyFile:1(
  ClassDef:1(
    Foo
    FuncDef:2(
      bar
      Args(
        Var:nil(self))
      Block:3(
        ReturnStmt:3(
          IntExpr(1))))))

[case testClassWithSingleBase]
class A(B):
    pass
[out]
MypyFile:1(
  ClassDef:1(
    A
    BaseTypeExpr(
      NameExpr(B))
    PassStmt:2()))

[case testClassWithMultipleBases]
class Child(Base1, Base2):
    x = 1
[out]
MypyFile:1(
  ClassDef:1(
    Child
    BaseTypeExpr(
      NameExpr(Base1)
      NameExpr(Base2))
    AssignmentStmt:2(
      NameExpr(x)
      IntExpr(1))))

[case testFloatLiteral]
x = 3.14
[out]
MypyFile:1(
  AssignmentStmt:1(
    NameExpr(x)
    FloatExpr(3.14)))

[case testUnaryExpressions]
-x
+y
~z
not w
[out]
MypyFile:1(
  ExpressionStmt:1(
    UnaryExpr:1(
      -
      NameExpr(x)))
  ExpressionStmt:2(
    UnaryExpr:2(
      +
      NameExpr(y)))
  ExpressionStmt:3(
    UnaryExpr:3(
      ~
      NameExpr(z)))
  ExpressionStmt:4(
    UnaryExpr:4(
      not
      NameExpr(w))))

[case testDictionaryExpression]
{}
{1:x}
[out]
MypyFile:1(
  ExpressionStmt:1(
    DictExpr:1())
  ExpressionStmt:2(
    DictExpr:2(
      IntExpr(1)
      NameExpr(x))))

[case testComplexLiteral]
1j
2.5j
[out]
MypyFile:1(
  ExpressionStmt:1(
    ComplexExpr(1j))
  ExpressionStmt:2(
    ComplexExpr(2.5j)))

[case testSlices]
x[1:2]
x[:1]
x[1:]
x[:]
[out]
MypyFile:1(
  ExpressionStmt:1(
    IndexExpr:1(
      NameExpr(x)
      SliceExpr:1(
        IntExpr(1)
        IntExpr(2))))
  ExpressionStmt:2(
    IndexExpr:2(
      NameExpr(x)
      SliceExpr:2(
        <empty>
        IntExpr(1))))
  ExpressionStmt:3(
    IndexExpr:3(
      NameExpr(x)
      SliceExpr:3(
        IntExpr(1)
        <empty>)))
  ExpressionStmt:4(
    IndexExpr:4(
      NameExpr(x)
      SliceExpr:4(
        <empty>
        <empty>))))

[case testSliceWithStride]
x[1:2:3]
x[1::2]
x[:1:2]
x[::2]
[out]
MypyFile:1(
  ExpressionStmt:1(
    IndexExpr:1(
      NameExpr(x)
      SliceExpr:1(
        IntExpr(1)
        IntExpr(2)
        IntExpr(3))))
  ExpressionStmt:2(
    IndexExpr:2(
      NameExpr(x)
      SliceExpr:2(
        IntExpr(1)
        <empty>
        IntExpr(2))))
  ExpressionStmt:3(
    IndexExpr:3(
      NameExpr(x)
      SliceExpr:3(
        <empty>
        IntExpr(1)
        IntExpr(2))))
  ExpressionStmt:4(
    IndexExpr:4(
      NameExpr(x)
      SliceExpr:4(
        <empty>
        <empty>
        IntExpr(2)))))

[case testFunctionSignature]
def f() -> int:
    pass
def g() -> None:
    pass
def h(x: foo.bar, y, z: x.y.z):
    pass
[out]
MypyFile:1(
  FuncDef:1(
    f
    def () -> int?
    Block:2(
      PassStmt:2()))
  FuncDef:3(
    g
    def () -> None?
    Block:4(
      PassStmt:4()))
  FuncDef:5(
    h
    Args(
      Var:nil(x)
      Var:nil(y)
      Var:nil(z))
    def (x: foo.bar?, y: Any, z: x.y.z?) -> Any
    Block:6(
      PassStmt:6())))

[case testFunctionSignature2]
def f(x: a[b]) -> c.d[e.f.g[h], i]:
    pass
[out]
MypyFile:1(
  FuncDef:1(
    f
    Args(
      Var:nil(x))
    def (x: a?[b?]) -> c.d?[e.f.g?[h?], i?]
    Block:2(
      PassStmt:2())))
